---
title: Java通过系统环境变量修改配置文件信息
date: 2017/6/20
categories: Java
tag: ubuntu
---

在开发线上代码的时候所遇到的一个问题，线上代码由于需要实现通过服务器的配置来完成服务器配置中变量的改动，而不是通过写死代码。因为将配置用代码写死最大的问题自然是如果只是简单的配置信息需要修改，例如数据库的地址更换，也需要整个发布新版本，无疑这是浪费资源的。因此就需要通过其他途径来修改配置文件的信息。

# 在本地添加环境变量

我们这里讨论的方式是通过系统环境变量的方式来替换掉jar包中的配置信息。首先我们需要为我们的系统环境添加新的环境变量，例如在ubuntu中添加一个环境变量，我们可以先在当前shell中添加环境变量：

```shell
export YOUR_VALUE_NAME='value'
```

然后我们可以在当前shell中使用echo来返回查看是否设置成功

```shell
echo $YOUR_VALUE_NAME
```
!["图1 echo输出结果"](/img/17-6/20-1.png)

我们可以看到在这个shell中我们的环境变量已经设置成功了。但是大部分时候我们需要设置的系统的环境变量，这样在实际用来起来才有意义。由于我的ubuntu系统使用了zsh，因此添加环境环境变量就十分简单了，只要在zsh中将export添加进行就好了。

```shell
vim ~/.zshrc
```

打开zshrc后，将此加入最后一行，然后保存。

```shell
export YOUR_VALUE_NAME='value'
```

这时我们只需要重新加载配置文件就可以了。

```shell
source ~/.zshrc
```
注意！！加载配置文件之后，所有已打开的shell，包括你的IDE都需要重启，不然是无法访问到这个环境变量的。

# 在java中访问环境变量
在java中访问环境变量其实十分的简单，只需要通过System就可以访问到我们新的环境变量。

```java
String evn = System.getevn('YOUR_VALUE_NAME');
```
这个时候我们刚刚加入的环境变量就已经赋值给evn了，下面只需要通过简单的if、else就可以在java代码中将配置信息替换成环境变量。
